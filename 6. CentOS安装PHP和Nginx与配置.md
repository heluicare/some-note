***1.安装php5.6***

    rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
    rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
    yum install -y php56w.x86_64 php56w-cli.x86_64 php56w-common.x86_64 php56w-gd.x86_64 php56w-ldap.x86_64 php56w-mbstring.x86_64 php56w-mcrypt.x86_64 php56w-mysql.x86_64 php56w-pdo.x86_64 php56w-fpm
    php -v


***2.安装nginx***

2.1创建www用户

    groupadd www && useradd -g www -s /bin/false www

2.2添加nginx官方yum源

    vi /etc/yum.repos.d/nginx.repo

    [nginx]
    name=nginx repo
    baseurl=http://nginx.org/packages/centos/7/$basearch/
    gpgcheck=1
    enabled=1


2.3下载nginx签名密钥

    rpm --import http://nginx.org/keys/nginx_signing.key
    yum -y install nginx


***3.配置nginx支持php***

3.1处理php-fpm配置

    vi /etc/php-fpm.d/www.conf

    user = www
    group = www


3.2处理nginx配置

    vi /etc/nginx/nginx.conf
    user www;
    
    
3.4处理nginx默认虚拟主机配置

    vi /etc/nginx/conf.d/default.conf 

    location ~ \.php$ {
      root /usr/share/nginx/html;
      fastcgi_pass 127.0.0.1:9000;
      fastcgi_index index.php;
      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
      include fastcgi_params;
    }
    
    
3.5重启nginx,php-fpm

    systemctl restart  nginx.service
    systemctl restart  php-fpm.service


附：如果以上都配置完，输入IP无法访问网页，而且nginx的access.log、error.log为空，考虑是服务器的80端口没有开启
firewall-cmd --zone=public --add-port=80/tcp --permanent
firewall-cmd --reload


***Nginx 403错误可能原因：***

1. 由于启动用户和nginx工作用户不一致所致
1.1查看nginx的启动用户，发现是nginx，而不是用root启动的

    ps -aux | grep nginx
    
1.2将nginx.conf的user改为和启动(worker)用户一致


2.权限问题，如果nginx没有web目录的操作权限，也会出现403错误。

    chmod -R 777 /data
    chmod -R 777 /data/www/
    
3.SELinux设置为开启状态（enabled）的原因。
3.1、查看当前selinux的状态。

    /usr/sbin/sestatus
    
3.2、将SELINUX=enforcing 修改为 SELINUX=disabled 状态。

    vi /etc/selinux/config

    #SELINUX=enforcing
    SELINUX=disabled
    
3.3、重启生效

       reboot
       
       
